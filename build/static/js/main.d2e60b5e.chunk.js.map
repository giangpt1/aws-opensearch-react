{"version":3,"sources":["components/ProductsList.jsx","components/SearchProducts.jsx","components/Products.jsx","App.js","index.js"],"names":["ProductsList","_ref","results","keyword","filteredData","forEach","item","_step","productsTmp","_source","products","_iterator","_createForOfIteratorHelper","s","n","done","prod","value","product_name","toLowerCase","includes","push","err","e","f","key","groupedData","reduce","rv","x","console","log","_jsx","children","Object","entries","map","_ref2","_ref3","_slicedToArray","values","className","_jsxs","_id","SearchProducts","handleOnChange","_Fragment","type","onChange","placeholder","Products","_useState","useState","_useState2","searchTerm","setSearchTerm","_useState3","_useState4","productsData","setProductsData","deferredInput","useDeferredValue","useEffect","fetchProducts","then","_asyncToGenerator","_regeneratorRuntime","mark","_callee","input","wrap","_context","prev","next","abrupt","fetch","concat","headers","res","json","productData","hits","stop","_x","apply","arguments","target","App","rootElement","document","getElementById","createRoot","render","StrictMode"],"mappings":"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","file":"static/js/main.d2e60b5e.chunk.js","sourcesContent":["import React from \"react\";\n\nconst ProductsList = ({ results, keyword }) => {\n  const groupBy = function (xs, key) {\n    return xs.reduce(function (rv, x) {\n      (rv[x[key]] = rv[x[key]] || []).push(x);\n      return rv;\n    }, {});\n  };\n\n  const filteredData = [];\n\n  results.forEach(item => {\n    const productsTmp = item._source.products;\n    for (const prod of productsTmp) {\n      if (prod.product_name.toLowerCase().includes(keyword)) {\n        filteredData.push(prod);\n      }\n    }\n  });\n\n  const groupedData = groupBy(filteredData, \"category\");\n\n  console.log(\"groupedData: \", groupedData);\n\n  return (\n    <div>\n      {Object.entries(groupedData).map(([key, values]) => {\n        return (\n          <div className=\"product\" key={key}>\n            <section className=\"product__info\">\n              <div className=\"product__title\">{key}</div>\n              {values.map(prod => {\n                return (\n                  <div className=\"product__desc\">\n                    Product Name: {prod.product_name} ---*--- ID: {prod._id}\n                  </div>\n                );\n              })}\n            </section>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default ProductsList;\n","import React from \"react\";\n\nconst SearchProducts = ({ handleOnChange }) => {\n  return (\n    <>\n      <input\n        type=\"text\"\n        onChange={handleOnChange}\n        placeholder=\"Search your product here\"\n      />\n    </>\n  );\n};\n\nexport default SearchProducts;\n","import React, { useDeferredValue, useState, useEffect } from \"react\";\n\nimport ProductsList from \"./ProductsList\";\nimport SearchProducts from \"./SearchProducts\";\n\nexport const Products = () => {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [productsData, setProductsData] = useState([]);\n\n  const deferredInput = useDeferredValue(searchTerm);\n\n  useEffect(() => {\n    if (deferredInput !== \"\") {\n      fetchProducts(deferredInput).then(products => {\n        setProductsData(products);\n      });\n    } else {\n      setProductsData([]);\n    }\n  }, [deferredInput]);\n\n  const fetchProducts = async input => {\n    return fetch(\n      `https://8ky35k70oc.execute-api.ap-northeast-1.amazonaws.com/products?keyword=${input}`,\n      {\n        headers: {\n          \"x-api-key\": \"YHTdXURDcXamPN8x5vBTT2gljyI6umrR2rjISE5m\",\n        },\n      }\n    )\n      .then(res => res.json())\n      .then(productData => {\n        return productData.hits.hits;\n      });\n  };\n\n  const handleOnChange = e => {\n    setSearchTerm(e.target.value);\n  };\n\n  return (\n    <div className=\"products\">\n      <h1>Products</h1>\n      <SearchProducts handleOnChange={handleOnChange} />\n      <ProductsList results={productsData} keyword={searchTerm} />\n    </div>\n  );\n};\n","import \"./App.css\";\nimport { Products } from \"./components/Products\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Products />\n    </div>\n  );\n}\n\nexport default App;\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"sourceRoot":""}